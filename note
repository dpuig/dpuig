http_filters:
- name: envoy.filters.http.lua
  typed_config:
    "@type": type.googleapis.com/envoy.extensions.filters.http.lua.v3.Lua
    inline_code: |
      function envoy_on_request(request_handle)
        -- Get the header value
        local header_value = request_handle:headers():get("your-header-name")
        
        -- Check if the header value is "True"
        if header_value == "True" then
          -- Increase the custom stats counter
          request_handle:streamInfo():dynamicMetadata():set("envoy.lua", "custom_counter", 1)
        end
      end
- name: envoy.filters.http.router

stats_sinks:
- name: envoy.stat_sinks.statsd
  typed_config:
    "@type": type.googleapis.com/envoy.config.metrics.v3.StatsdSink
    address:
      socket_address:
        address: 127.0.0.1
        port_value: 8125
