#!/bin/bash

NAMESPACE=<namespace>

# Get list of nodes for a namespace
NODES=$(oc get pods -n $NAMESPACE -o jsonpath='{range .items[*]}{.spec.nodeName}{"\n"}{end}' | sort | uniq)

# Loop over nodes and print their IPs
for NODE in $NODES
do
    NODE_IP=$(oc get node $NODE -o jsonpath='{.status.addresses[?(@.type=="InternalIP")].address}')
    echo "Node: $NODE, IP: $NODE_IP"
done
